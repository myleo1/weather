const height = 800;
const width = 1500;
let weatherFlag
let weatherFlag4Forecast = []
let icon = {}
icon.temperature = `<g><g><path d="M53.673,62.001V29.97c0-2.028-1.644-3.672-3.673-3.672c-2.03,0-3.674,1.645-3.674,3.672v32.031     c-5.353,1.585-9.26,6.535-9.26,12.402c0,7.143,5.792,12.934,12.934,12.934c7.145,0,12.935-5.791,12.935-12.934     C62.935,68.536,59.025,63.586,53.673,62.001z"/></g><g><path d="M60.322,57.34V15.975c0-5.691-4.631-10.322-10.322-10.322s-10.322,4.631-10.322,10.322V57.34     c-5.965,3.607-9.62,10.032-9.62,17.063c0,10.996,8.946,19.944,19.942,19.944s19.942-8.948,19.942-19.944     C69.942,67.372,66.286,60.947,60.322,57.34z M50,90.146c-8.681,0-15.745-7.062-15.745-15.743c0-5.895,3.253-11.249,8.492-13.974     l1.13-0.588V15.975c0-3.377,2.746-6.123,6.123-6.123s6.123,2.746,6.123,6.123v0.785h-2.01c-0.58,0-1.05,0.471-1.05,1.05     c0,0.581,0.47,1.05,1.05,1.05h2.01v1.181h-2.01c-0.58,0-1.05,0.469-1.05,1.05c0,0.58,0.47,1.05,1.05,1.05h2.01v1.18h-2.01     c-0.58,0-1.05,0.471-1.05,1.05c0,0.581,0.47,1.05,1.05,1.05h2.01v34.422l1.129,0.588c5.238,2.725,8.491,8.079,8.491,13.974     C65.743,83.084,58.68,90.146,50,90.146z"/></g></g>`;
icon.humidity = `<g ><path d="M50,5c0,0-35,22.3-35,55c0,19.3,15.7,35,35,35s35-15.7,35-35C85,27.3,50,5,50,5z M50,87.5c-15.2,0-27.5-12.3-27.5-27.5   c0-21.9,19-39.1,27.5-45.8C58.5,20.8,77.5,38,77.5,60C77.5,75.2,65.2,87.5,50,87.5z"/><path d="M32.5,60h-5c0,12.4,10.1,22.5,22.5,22.5v-5C40.4,77.5,32.5,69.6,32.5,60z"/></g>`;
icon.humidity2 = `<g transform="scale(0.5) translate(-50,-65)"><path d="M50,5c0,0-35,22.3-35,55c0,19.3,15.7,35,35,35s35-15.7,35-35C85,27.3,50,5,50,5z M50,87.5c-15.2,0-27.5-12.3-27.5-27.5   c0-21.9,19-39.1,27.5-45.8C58.5,20.8,77.5,38,77.5,60C77.5,75.2,65.2,87.5,50,87.5z"/><path d="M32.5,60h-5c0,12.4,10.1,22.5,22.5,22.5v-5C40.4,77.5,32.5,69.6,32.5,60z"/></g>`;
icon["test"] = ``;
icon["clear-day"] = `<g transform="scale(0.25) translate(-500, -1280)">
		<path d="M501.33,1307.01c-27.57,0-50-22.43-50-50s22.43-50,50-50s50,22.43,50,50S528.9,1307.01,501.33,1307.01z     M501.33,1217.01c-22.06,0-40,17.94-40,40s17.94,40,40,40s40-17.94,40-40S523.38,1217.01,501.33,1217.01z"/>
		<path d="M501.28,1198.96c-2.76,0-5-2.24-5-5v-27c0-2.76,2.24-5,5-5s5,2.24,5,5v27    C506.28,1196.72,504.04,1198.96,501.28,1198.96z"/>
		<path d="M501.28,1351.96c-2.76,0-5-2.24-5-5v-27c0-2.76,2.24-5,5-5s5,2.24,5,5v27    C506.28,1349.72,504.04,1351.96,501.28,1351.96z"/>
		<path d="M438.28,1261.96h-27c-2.76,0-5-2.24-5-5s2.24-5,5-5h27c2.76,0,5,2.24,5,5S441.04,1261.96,438.28,1261.96z"/>
		<path d="M591.28,1261.96h-27c-2.76,0-5-2.24-5-5s2.24-5,5-5h27c2.76,0,5,2.24,5,5S594.04,1261.96,591.28,1261.96z"/>
		<path d="M545.55,1217.69c-1.28,0-2.56-0.49-3.54-1.46c-1.95-1.95-1.95-5.12,0-7.07l19.37-19.37    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-19.37,19.37C548.11,1217.2,546.83,1217.69,545.55,1217.69z"/>
		<path d="M437.64,1325.6c-1.28,0-2.56-0.49-3.54-1.46c-1.95-1.95-1.95-5.12,0-7.07l19.37-19.37    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-19.37,19.37C440.2,1325.11,438.92,1325.6,437.64,1325.6z"/>
		<path d="M457.01,1217.69c-1.28,0-2.56-0.49-3.54-1.46l-19.37-19.37c-1.95-1.95-1.95-5.12,0-7.07    c1.95-1.95,5.12-1.95,7.07,0l19.37,19.37c1.95,1.95,1.95,5.12,0,7.07C459.57,1217.2,458.29,1217.69,457.01,1217.69z"/>
		<path d="M564.92,1325.6c-1.28,0-2.56-0.49-3.54-1.46l-19.37-19.37c-1.95-1.95-1.95-5.12,0-7.07    c1.95-1.95,5.12-1.95,7.07,0l19.37,19.37c1.95,1.95,1.95,5.12,0,7.07C567.48,1325.11,566.2,1325.6,564.92,1325.6z"/>
	</g>`;
icon["clear-night"] = `<g transform="scale(0.30) translate(-762,-1884)"><path d="M776.73,1927.01c-33.08,0-60-26.92-60-60s26.92-60,60-60c1.6,0,3.24,0.07,4.88,0.2   c1.79,0.14,3.36,1.24,4.12,2.86s0.6,3.53-0.44,5c-5.93,8.44-9.07,18.37-9.07,28.72c0,12.65,4.73,24.71,13.32,33.98   c8.54,9.22,20.12,14.85,32.6,15.85c1.79,0.14,3.36,1.24,4.12,2.86c0.76,1.62,0.6,3.53-0.44,5   C814.61,1917.47,796.25,1927.01,776.73,1927.01z M772.43,1817.19c-25.56,2.19-45.7,23.7-45.7,49.82c0,27.57,22.43,50,50,50   c13.45,0,26.23-5.44,35.56-14.85c-11.47-2.73-21.92-8.8-30.07-17.59c-10.31-11.12-15.99-25.6-15.99-40.78   C766.23,1834.46,768.36,1825.41,772.43,1817.19z"/></g>`;
icon["rain"] = `<g transform="scale(0.25) translate(-500,-1590)">
		<path class="st280" d="M561.57,1602.01l-5.29,0l0,0l-115.14-0.04c-19.22,0-34.86-15.68-34.86-34.96    c0-16.64,11.49-30.55,27.14-34.08c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.18,3.34    c9.99-13.21,25.41-20.95,42.23-20.95c26.29,0,48.45,19.36,52.39,44.88c18.2,1.22,32.63,16.42,32.63,34.92    c0,19.1-15.55,34.79-34.66,34.98C561.6,1602.01,561.58,1602.01,561.57,1602.01z M556.28,1592l5.27,0    c13.64-0.15,24.73-11.35,24.73-24.98c0-13.78-11.22-25-25.01-25c-0.59,0-1.22,0.04-1.76,0.08c-1.33,0.09-2.64-0.35-3.64-1.22    c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.76-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37    c-1.53,0.18-3.05-0.35-4.14-1.44c-2.61-2.63-6.09-4.07-9.79-4.07c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.47,6.19    c0.76,1.52,0.7,3.32-0.16,4.79c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.48-23.95,24.93    c0,13.76,11.15,24.96,24.86,24.96h5.14L556.28,1592z"/>
		<path class="st280" d="M483.76,1655.43c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l12.52-12.51    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-12.52,12.51C486.31,1654.94,485.03,1655.43,483.76,1655.43z"/>
		<path class="st280" d="M440.26,1626.93c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l7.9-7.89    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-7.9,7.89C442.81,1626.44,441.54,1626.93,440.26,1626.93z"/>
		<path class="st280" d="M509.76,1626.93c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l7.9-7.89    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-7.9,7.89C512.31,1626.44,511.04,1626.93,509.76,1626.93z"/>
		<path class="st280" d="M532.26,1639.51c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l20.5-20.47    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-20.5,20.47C534.81,1639.02,533.53,1639.51,532.26,1639.51z"/>
		<path class="st280" d="M456.76,1645.01c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l26-25.97    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-26,25.97C459.31,1644.52,458.03,1645.01,456.76,1645.01z"/>
	</g>`;
icon["snow"] = `<g transform="scale(0.25) translate(-750,-1590)">
		<path class="st280" d="M831.57,1591.01l-5.29,0l0,0l-115.14-0.04c-19.22,0-34.86-15.68-34.86-34.96    c0-16.64,11.49-30.55,27.14-34.08c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.18,3.34    c9.99-13.21,25.41-20.95,42.23-20.95c26.29,0,48.45,19.36,52.39,44.88c18.2,1.22,32.63,16.42,32.63,34.92    c0,19.1-15.55,34.79-34.66,34.98C831.6,1591.01,831.58,1591.01,831.57,1591.01z M826.28,1581l5.27,0    c13.64-0.15,24.73-11.35,24.73-24.98c0-13.78-11.22-25-25.01-25c-0.59,0-1.22,0.04-1.76,0.08c-1.32,0.09-2.64-0.35-3.64-1.22    c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.76-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37    c-1.53,0.18-3.05-0.35-4.14-1.44c-2.61-2.63-6.09-4.07-9.79-4.07c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.47,6.19    c0.76,1.52,0.7,3.32-0.16,4.79c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.48-23.95,24.93    c0,13.76,11.15,24.96,24.86,24.96h5.14L826.28,1581z"/>
		<path class="st280" d="M723.28,1658.49c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l30.95-30.92    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-30.95,30.92C725.84,1658,724.56,1658.49,723.28,1658.49z"/>
		<path class="st280" d="M754.21,1658.5c-1.28,0-2.56-0.49-3.54-1.47l-30.92-30.95c-1.95-1.95-1.95-5.12,0-7.07    c1.95-1.95,5.12-1.95,7.07,0l30.92,30.95c1.95,1.95,1.95,5.12,0,7.07C756.77,1658.02,755.49,1658.5,754.21,1658.5z"/>
		<path class="st280" d="M763.75,1642.96C763.75,1642.96,763.75,1642.96,763.75,1642.96l-50,0.01c-2.76,0-5-2.25-5-5.01    c0-2.76,2.24-5,5-5c0,0,0,0,0,0l50,0.05c2.76,0,5,2.22,5,4.98C768.75,1640.75,766.51,1642.96,763.75,1642.96z"/>
		<path class="st280" d="M738.74,1667.96C738.74,1667.96,738.74,1667.96,738.74,1667.96c-2.76,0-5-2.21-5-4.97l0.03-50.02    c0-2.76,2.24-5.01,5-5.01c0,0,0,0,0,0c2.76,0,5,2.27,5,5.04l-0.03,49.98C743.74,1665.74,741.5,1667.96,738.74,1667.96z"/>
		<path class="st280" d="M792.63,1636.33c-1.72,0-3.4-0.89-4.33-2.49c-1.39-2.39-0.58-5.45,1.81-6.84l30.25-17.6    c2.39-1.39,5.45-0.58,6.84,1.81c1.39,2.39,0.58,5.45-1.81,6.84l-30.25,17.6C794.35,1636.11,793.49,1636.33,792.63,1636.33z"/>
		<path class="st280" d="M823.13,1635.88c-0.81,0-1.62-0.2-2.38-0.61l-30.76-16.7c-2.43-1.32-3.33-4.35-2.01-6.78    c1.32-2.43,4.35-3.33,6.78-2.01l30.76,16.7c2.43,1.32,3.33,4.35,2.01,6.78C826.62,1634.93,824.91,1635.88,823.13,1635.88z"/>
		<path class="st280" d="M807.75,1644.96C807.74,1644.96,807.74,1644.96,807.75,1644.96c-2.76,0-5-2.35-5-5.12l0.02-34.4    c0-2.76,2.24-4.98,5-4.98c0,0,0,0,0,0c2.76,0,5,2.17,5,4.93l-0.02,34.49C812.74,1642.64,810.51,1644.96,807.75,1644.96z"/>
	</g>`;
icon["sleet"] = `<g transform="scale(0.25) translate(-212,-1884)">
		<path class="st280" d="M198.63,1914.83c-1.72,0-3.4-0.89-4.33-2.49c-1.39-2.39-0.58-5.45,1.81-6.84l30.25-17.6    c2.39-1.39,5.45-0.58,6.84,1.81c1.39,2.39,0.58,5.45-1.81,6.84l-30.25,17.6C200.35,1914.61,199.49,1914.83,198.63,1914.83z"/>
		<path class="st280" d="M229.13,1914.38c-0.81,0-1.62-0.2-2.38-0.61l-30.76-16.7c-2.43-1.32-3.33-4.35-2.01-6.78    c1.32-2.43,4.35-3.33,6.78-2.01l30.76,16.7c2.43,1.32,3.33,4.35,2.01,6.78C232.62,1913.43,230.91,1914.38,229.13,1914.38z"/>
		<path class="st280" d="M213.75,1923.46C213.74,1923.46,213.74,1923.46,213.75,1923.46c-2.76,0-5-2.35-5-5.12l0.02-34.4    c0-2.76,2.24-4.98,5-4.98c0,0,0,0,0,0c2.76,0,5,2.17,5,4.93l-0.02,34.49C218.74,1921.14,216.51,1923.46,213.75,1923.46z"/>
		<path class="st280" d="M246.13,1897.83c-1.72,0-3.4-0.89-4.33-2.49c-1.39-2.39-0.58-5.45,1.81-6.84l30.25-17.6    c2.39-1.39,5.45-0.58,6.84,1.81c1.39,2.39,0.58,5.45-1.81,6.84l-30.25,17.6C247.85,1897.61,246.99,1897.83,246.13,1897.83z"/>
		<path class="st280" d="M276.63,1897.38c-0.81,0-1.62-0.2-2.38-0.61l-30.76-16.7c-2.43-1.32-3.33-4.35-2.01-6.78    c1.32-2.43,4.35-3.33,6.78-2.01l30.76,16.7c2.43,1.32,3.33,4.35,2.01,6.78C280.12,1896.43,278.41,1897.38,276.63,1897.38z"/>
		<path class="st280" d="M261.25,1906.46C261.24,1906.46,261.24,1906.46,261.25,1906.46c-2.76,0-5-2.35-5-5.12l0.02-34.4    c0-2.76,2.24-4.98,5-4.98c0,0,0,0,0,0c2.76,0,5,2.17,5,4.93l-0.02,34.49C266.24,1904.14,264.01,1906.46,261.25,1906.46z"/>
		<path class="st280" d="M205.26,1955.93c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l12.52-12.51    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-12.52,12.51C207.81,1955.44,206.53,1955.93,205.26,1955.93z"/>
		<path class="st280" d="M180.76,1939.43c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l7.9-7.89    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-7.9,7.89C183.31,1938.94,182.04,1939.43,180.76,1939.43z"/>
		<path class="st280" d="M238.26,1931.93c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l7.9-7.89    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-7.9,7.89C240.81,1931.44,239.54,1931.93,238.26,1931.93z"/>
		<path class="st280" d="M258.76,1940.93c-1.28,0-2.56-0.49-3.54-1.47c-1.95-1.95-1.95-5.12,0-7.07l26-25.97    c1.95-1.95,5.12-1.95,7.07,0s1.95,5.12,0,7.07l-26,25.97C261.31,1940.44,260.03,1940.93,258.76,1940.93z"/>
		<path class="st280" d="M296.82,1897.01l-5.04,0c-2.76,0-5-2.24-5-5c0-2.76,2.24-5,5-5c0,0,0,0,0,0l5.02,0    c6.61-0.07,12.79-2.69,17.42-7.38c4.64-4.7,7.19-10.95,7.19-17.59c0-13.78-11.25-25-25.07-25c-0.63,0-1.32,0.04-1.79,0.08    c-1.33,0.1-2.64-0.35-3.64-1.22c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.31-40.21-42.94-40.21c-15.17,0-28.94,7.75-36.81,20.74    c-0.8,1.31-2.16,2.19-3.68,2.37c-1.53,0.18-3.05-0.35-4.14-1.44c-2.61-2.63-6.09-4.07-9.79-4.07c-7.61,0-13.81,6.19-13.81,13.81    c0,2.17,0.49,4.25,1.46,6.19c0.76,1.52,0.7,3.32-0.16,4.79c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.48-23.95,24.93    c0,13.76,11.15,24.96,24.86,24.96h6.14c2.76,0,5,2.24,5,5s-2.24,5-5,5h-6.14c-19.22,0-34.86-15.68-34.86-34.96    c0-16.64,11.49-30.55,27.14-34.08c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.19,3.34    c9.99-13.21,25.41-20.95,42.24-20.95c26.3,0,48.47,19.36,52.4,44.88c18.25,1.21,32.73,16.41,32.73,34.92    c0,9.29-3.58,18.03-10.07,24.62c-6.5,6.59-15.19,10.27-24.47,10.36C296.85,1897.01,296.83,1897.01,296.82,1897.01z"/>
	</g>`;
icon["wind"] = `<g transform="scale(0.25) translate(-1050, -1600)">
		<path class="st280" d="M1106.28,1575.96H979.74c-9.84,0-18.15-8.47-18.15-18.49c0-10.2,8.13-18.49,18.12-18.49    c9.98,0,18.1,8.24,18.1,18.37c0,2.76-2.24,5-5,5s-5-2.24-5-5c0-4.54-3.71-8.37-8.1-8.37c-4.4,0-8.12,3.89-8.12,8.49    c0,4.6,3.73,8.49,8.15,8.49h126.54c2.76,0,5,2.24,5,5S1109.04,1575.96,1106.28,1575.96z"/>
		<path class="st280" d="M1131.78,1554.46h-102.43c-12.56,0-22.78-10.32-22.78-23.01s10.17-23.01,22.68-23.01    c12.48,0,22.63,10.28,22.63,22.92c0,2.76-2.24,5-5,5s-5-2.24-5-5c0-7.12-5.67-12.92-12.63-12.92c-6.99,0-12.68,5.84-12.68,13.01    c0,7.05,5.85,13.01,12.78,13.01h102.43c2.76,0,5,2.24,5,5S1134.54,1554.46,1131.78,1554.46z"/>
		<path class="st280" d="M995.96,1631.87c-6.07,0-11.76-2.3-16.03-6.49c-4.31-4.22-6.68-9.9-6.68-15.97    c0-12.38,10.21-22.46,22.76-22.46h124.77c2.76,0,5,2.24,5,5s-2.24,5-5,5H996.01c-7.15,0-12.76,5.47-12.76,12.46    c0,6.98,5.58,12.46,12.71,12.46c7.11,0,12.68-5.51,12.68-12.55c0-2.76,2.24-5,5-5s5,2.24,5,5    C1018.64,1621.76,1008.47,1631.87,995.96,1631.87z"/>
	</g>`;
icon["fog"] = `<g transform="scale(0.25) translate(-512,-1884)">
		<path class="st280" d="M561.57,1897.01l-5.29,0l0,0l-115.14-0.04c-19.22,0-34.86-15.68-34.86-34.96    c0-16.64,11.49-30.55,27.14-34.08c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.18,3.34    c9.99-13.21,25.41-20.95,42.23-20.95c26.29,0,48.45,19.36,52.39,44.88c18.2,1.22,32.63,16.42,32.63,34.92    c0,19.1-15.55,34.79-34.66,34.98C561.6,1897.01,561.58,1897.01,561.57,1897.01z M556.28,1887l5.27,0    c13.64-0.15,24.73-11.35,24.73-24.98c0-13.78-11.22-25-25.01-25c-0.59,0-1.22,0.04-1.76,0.08c-1.33,0.1-2.64-0.35-3.64-1.22    c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.75-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37    c-1.53,0.18-3.05-0.35-4.14-1.44c-2.61-2.63-6.09-4.07-9.79-4.07c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.46,6.19    c0.76,1.52,0.7,3.32-0.16,4.79c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.48-23.95,24.93    c0,13.76,11.15,24.96,24.86,24.96h5.14L556.28,1887z"/>
		<path class="st280" d="M550.09,1939.46C550.09,1939.46,550.09,1939.46,550.09,1939.46l-28.19-0.01c-2.76,0-5-2.24-5-5    c0-2.76,2.24-4.99,5-4.99c0,0,0,0,0,0l28.19,0.02c2.76,0,5,2.23,5,5C555.09,1937.23,552.85,1939.46,550.09,1939.46z"/>
		<path class="st280" d="M502.4,1939.46C502.4,1939.46,502.4,1939.46,502.4,1939.46l-49.71-0.01c-2.76,0-5-2.23-5-5    c0-2.76,2.24-4.99,5-4.99c0,0,0,0,0,0l49.71,0.02c2.76,0,5,2.23,5,4.99C507.4,1937.23,505.16,1939.46,502.4,1939.46z"/>
		<path class="st280" d="M561.71,1918.46C561.71,1918.46,561.71,1918.46,561.71,1918.46l-64.77-0.01c-2.76,0-5-2.23-5-5    c0-2.76,2.24-4.99,5-4.99c0,0,0,0,0,0l64.77,0.02c2.76,0,5,2.23,5,4.99C566.71,1916.23,564.48,1918.46,561.71,1918.46z"/>
		<path class="st280" d="M478.21,1918.46C478.21,1918.46,478.21,1918.46,478.21,1918.46l-35.77-0.01c-2.76,0-5-2.24-5-5    c0-2.76,2.24-4.99,5-4.99c0,0,0,0,0,0l35.77,0.02c2.76,0,5,2.23,5,4.99C483.21,1916.23,480.97,1918.46,478.21,1918.46z"/>
	</g>`;
icon["cloudy"] = `<g transform="scale(0.25) translate(-230, -1280)"><path class="st280" d="M176.14,1314.06c-19.24-0.13-34.86-15.83-34.86-35c0-16.66,11.49-30.59,27.14-34.13   c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.18,3.34c9.99-13.21,25.41-20.95,42.23-20.95   c26.29,0,48.46,19.37,52.39,44.89c18.2,1.23,32.63,16.42,32.63,34.93c0,19.11-15.55,34.81-34.66,35L176.14,1314.06z    M191.84,1226.84c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.47,6.19c0.76,1.52,0.7,3.32-0.16,4.79   c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.5-23.95,24.98c0,13.7,11.17,24.91,24.89,25l120.4,0   c13.6-0.13,24.71-11.35,24.71-25c0-13.79-11.22-25.01-25.01-25.01c-0.51,0-1.07,0.02-1.76,0.07c-1.33,0.09-2.64-0.35-3.64-1.22   c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.75-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37   c-1.53,0.18-3.05-0.35-4.14-1.44C199.02,1228.28,195.54,1226.84,191.84,1226.84z"/></g>`;
icon["partly-cloudy-day"] = `<g transform="scale(0.22) translate(-750, -1280)">
		<path class="st280" d="M820.18,1281.96c-1.45,0-2.9-0.63-3.88-1.85c-1.74-2.14-1.41-5.29,0.73-7.03    c9.41-7.64,14.8-18.97,14.8-31.07c0-22.06-17.94-40-40-40c-20.4,0-37.49,15.26-39.75,35.51c-0.31,2.74-2.78,4.72-5.52,4.41    c-2.74-0.31-4.72-2.78-4.41-5.52c2.83-25.31,24.19-44.4,49.69-44.4c27.57,0,50,22.43,50,50c0,15.13-6.74,29.28-18.5,38.83    C822.4,1281.59,821.28,1281.96,820.18,1281.96z"/>
		<path class="st280" d="M791.78,1183.96c-2.76,0-5-2.24-5-5v-27c0-2.76,2.24-5,5-5s5,2.24,5,5v27    C796.78,1181.72,794.54,1183.96,791.78,1183.96z"/>
		<path class="st280" d="M728.78,1246.96h-27c-2.76,0-5-2.24-5-5s2.24-5,5-5h27c2.76,0,5,2.24,5,5S731.54,1246.96,728.78,1246.96z"/>
		<path class="st280" d="M881.78,1246.96h-27c-2.76,0-5-2.24-5-5s2.24-5,5-5h27c2.76,0,5,2.24,5,5S884.54,1246.96,881.78,1246.96z"/>
		<path class="st280" d="M836.05,1202.69c-1.28,0-2.56-0.49-3.54-1.46c-1.95-1.95-1.95-5.12,0-7.07l19.37-19.37    c1.95-1.95,5.12-1.95,7.07,0c1.95,1.95,1.95,5.12,0,7.07l-19.37,19.37C838.61,1202.2,837.33,1202.69,836.05,1202.69z"/>
		<path class="st280" d="M747.51,1202.69c-1.28,0-2.56-0.49-3.54-1.46l-19.37-19.37c-1.95-1.95-1.95-5.12,0-7.07    c1.95-1.95,5.12-1.95,7.07,0l19.37,19.37c1.95,1.95,1.95,5.12,0,7.07C750.07,1202.2,748.79,1202.69,747.51,1202.69z"/>
		<path class="st280" d="M855.42,1310.6c-1.28,0-2.56-0.49-3.54-1.46l-19.37-19.37c-1.95-1.95-1.95-5.12,0-7.07    c1.95-1.95,5.12-1.95,7.07,0l19.37,19.37c1.95,1.95,1.95,5.12,0,7.07C857.98,1310.11,856.7,1310.6,855.42,1310.6z"/>
		<path class="st280" d="M691.76,1356.96c-19.24-0.13-34.86-15.83-34.86-35c0-16.66,11.49-30.59,27.14-34.13    c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.18,3.34c9.99-13.21,25.41-20.95,42.23-20.95    c26.29,0,48.46,19.37,52.39,44.89c18.2,1.23,32.63,16.42,32.63,34.93c0,19.11-15.55,34.81-34.66,35L691.76,1356.96z     M707.47,1269.74c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.47,6.19c0.76,1.52,0.7,3.32-0.16,4.79    c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.5-23.95,24.98c0,13.7,11.17,24.91,24.89,25l120.4,0    c13.6-0.13,24.71-11.35,24.71-25c0-13.79-11.22-25.01-25.01-25.01c-0.51,0-1.07,0.02-1.76,0.07c-1.32,0.09-2.64-0.35-3.64-1.22    c-1-0.88-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.75-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37    c-1.53,0.18-3.05-0.35-4.14-1.44C714.64,1271.19,711.17,1269.74,707.47,1269.74z"/>
	</g>`;
icon["partly-cloudy-night"] = `<g transform="scale(0.25) translate(-1050, -1280)">
		<path class="st280" d="M977.26,1345.96c-19.24-0.13-34.86-15.83-34.86-35c0-16.66,11.49-30.59,27.14-34.13    c-0.25-1.4-0.38-2.83-0.38-4.28c0-13.13,10.68-23.81,23.81-23.81c4.36,0,8.54,1.16,12.19,3.34c9.99-13.21,25.41-20.95,42.23-20.95    c26.29,0,48.46,19.37,52.39,44.89c18.2,1.23,32.63,16.42,32.63,34.93c0,19.11-15.55,34.81-34.66,35L977.26,1345.96z     M992.96,1258.74c-7.61,0-13.81,6.19-13.81,13.81c0,2.17,0.49,4.25,1.47,6.19c0.76,1.52,0.7,3.32-0.16,4.79    c-0.86,1.46-2.41,2.39-4.11,2.46c-13.43,0.53-23.95,11.5-23.95,24.98c0,13.7,11.17,24.91,24.89,25l120.4,0    c13.6-0.13,24.71-11.35,24.71-25c0-13.79-11.22-25.01-25.01-25.01c-0.51,0-1.07,0.02-1.76,0.07c-1.32,0.09-2.64-0.35-3.64-1.22    s-1.61-2.12-1.7-3.44c-1.45-22.55-20.3-40.21-42.92-40.21c-15.17,0-28.93,7.75-36.81,20.74c-0.8,1.31-2.16,2.19-3.68,2.37    c-1.53,0.18-3.05-0.35-4.14-1.44C1000.14,1260.19,996.67,1258.74,992.96,1258.74z"/>
		<path class="st280" d="M1126.9,1283.54c-2.27,0-4.32-1.55-4.86-3.85c-0.63-2.69,1.03-5.38,3.72-6.01    c9.17-2.16,17.48-6.87,24.04-13.52c-11.47-2.73-21.92-8.8-30.08-17.59c-10.31-11.12-15.99-25.6-15.99-40.78    c0-9.33,2.12-18.38,6.2-26.6c-11.5,0.98-22.24,5.86-30.59,14c-9.37,9.13-14.73,21.35-15.09,34.4c-0.08,2.76-2.37,4.96-5.14,4.86    c-2.76-0.08-4.94-2.38-4.86-5.14c0.43-15.67,6.86-30.34,18.11-41.29c11.27-10.98,26.14-17.02,41.87-17.02    c1.6,0,3.25,0.07,4.88,0.2c1.79,0.14,3.36,1.24,4.13,2.86c0.76,1.62,0.6,3.53-0.44,5c-5.93,8.44-9.07,18.37-9.07,28.72    c0,12.65,4.73,24.71,13.32,33.98c8.55,9.22,20.12,14.85,32.6,15.85c1.79,0.14,3.36,1.24,4.12,2.86c0.76,1.62,0.6,3.53-0.44,5    c-8.48,12.06-21.02,20.56-35.3,23.93C1127.66,1283.5,1127.28,1283.54,1126.9,1283.54z"/>
	</g>`;
icon["hail"] = ``;
icon["thunderstorm"] = ``;
icon["tornado"] = ``;

getWeather(location.search.substr(location.search.length - 4)).then(weatherJson => {
    switch (weatherJson.live.weather) {
        case"多云":
        case"阴":
            weatherFlag = "cloudy"
            break
        case"晴":
        case"晴间多云":
            weatherFlag = "clear-day"
            break
        case"阵雨":
        case"雷阵雨":
        case"雷阵雨并伴有冰雹":
        case"小雨":
        case"中雨":
        case"大雨":
        case"暴雨":
        case"大暴雨":
        case"特大暴雨":
        case"强阵雨":
        case"强雷阵雨":
        case"极端降雨":
        case"毛毛雨/细雨":
        case"雨":
        case"小雨-中雨":
        case"中雨-大雨":
        case"大雨-暴雨":
        case"暴雨-大暴雨":
        case"大暴雨-特大暴雨":
        case"冻雨":
        case"雨夹雪":
        case"雨雪天气":
        case"阵雨夹雪":
            weatherFlag = "rain"
            break
        case"雪":
        case"阵雪":
        case"小雪":
        case"中雪":
        case"大雪":
        case"暴雪":
        case"小雪-中雪":
        case"中雪-大雪":
        case"大雪-暴雪":
            weatherFlag = "snow"
            break
        case"雾":
        case"浓雾":
        case"强浓雾":
        case"轻雾":
        case"大雾":
        case"特强浓雾":
        case"霾":
        case"中度霾":
        case"重度霾":
        case"严重霾":
            weatherFlag = "fog"
            break
        default:
            weatherFlag = "clear-day"
            break
    }
    weatherJson.forecast.forEach((item, index) => {
        switch (item.dayweather) {
            case"多云":
            case"阴":
                weatherFlag4Forecast[index] = "cloudy"
                break
            case"晴":
            case"晴间多云":
                weatherFlag4Forecast[index] = "clear-day"
                break
            case"阵雨":
            case"雷阵雨":
            case"雷阵雨并伴有冰雹":
            case"小雨":
            case"中雨":
            case"大雨":
            case"暴雨":
            case"大暴雨":
            case"特大暴雨":
            case"强阵雨":
            case"强雷阵雨":
            case"极端降雨":
            case"毛毛雨/细雨":
            case"雨":
            case"小雨-中雨":
            case"中雨-大雨":
            case"大雨-暴雨":
            case"暴雨-大暴雨":
            case"大暴雨-特大暴雨":
            case"冻雨":
            case"雨夹雪":
            case"雨雪天气":
            case"阵雨夹雪":
                weatherFlag4Forecast[index] = "rain"
                break
            case"雪":
            case"阵雪":
            case"小雪":
            case"中雪":
            case"大雪":
            case"暴雪":
            case"小雪-中雪":
            case"中雪-大雪":
            case"大雪-暴雪":
                weatherFlag4Forecast[index] = "snow"
                break
            case"雾":
            case"浓雾":
            case"强浓雾":
            case"轻雾":
            case"大雾":
            case"特强浓雾":
            case"霾":
            case"中度霾":
            case"重度霾":
            case"严重霾":
                weatherFlag4Forecast[index] = "fog"
                break
            default:
                weatherFlag4Forecast[index] = "clear-day"
                break
        }
    })
    let svg = d3.select("body").append("svg")
        .attr("id", "panelSvg")
        .attr("width", width)
        .attr("height", height)

    svg.append("rect")
        .attr("class", "background")
        .attr("fill", "#152025")
        .attr("width", "100%")
        .attr("height", "100%")

//title
    svg.append("text")
        .attr("x", 650)
        .attr("y", 100)
        .attr("text-anchor", "middle")
        .attr("font-size", 30)
        .attr("font-weight", "bold")
        .attr("fill", "#fff")
        .text(weatherJson.live.city)

//current time
    let date = new Date()
//month返回0~11之间的数
    let month = date.getMonth() + 1
    let day = date.getDate()
    let weekDay = date.getDay()
    let hour = date.getHours()
    if (hour < 10) {
        hour = "0" + hour
    }
    let min = date.getMinutes()
    if (min < 10) {
        min = "0" + min
    }

    svg.append("text")
        .attr("x", 1200)
        .attr("y", 120)
        .attr("text-anchor", "end")
        .attr("fill", "#fff")
        .attr("font-size", 60)
        .text(hour + ":" + min)

    let dNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

    svg.append("text")
        .attr("x", 1200)
        .attr("y", 160)
        .attr("text-anchor", "end")
        .attr("fill", "#fff")
        .attr("font-size", 40)
        .text(dNames[weekDay] + " " + month + "/" + day)

//currentTemp
    let tempG = svg.append("g")
        .attr("class", "currTemp")
        .attr("transform", "translate(180,200)")
        .attr("stroke", "#fff")
        .attr("fill", "none")

    tempG.append("circle")
        .attr("r", 90)
        .attr("stroke-width", 2)

    tempG.append("circle")
        .attr("r", 85)
        .attr("stroke-width", 10)
        .attr("stroke", "#ffc107")

    tempG.append("circle")
        .attr("r", 80)
        .attr("stroke-width", 2)
    tempG.append("circle")
        .attr("r", 75)
        .attr("stroke-width", 1)
        .attr("stroke", "#535353")

    tempG.append("text")
        .attr("y", 50)
        .attr("text-anchor", "middle")
        .attr("fill", "#fff")
        .attr("font-size", 64)
        .text(weatherJson.live.temperature)

    tempG.append("text")
        .attr("y", 68)
        .attr("text-anchor", "middle")
        .attr("fill", "#fff")
        .attr("font-size", 18)
        .text('\xB0C')

    tempG.append("g")
        .attr("fill", "#fff")
        .attr("stroke-width", 1)
        .attr("stroke", "#fff")
        .attr("transform", "scale(1.5) translate(0,-15)")
        .html(icon[weatherFlag])

//live weather info
    let transX = ["400", "650", "900"]
    let iconTransX = ["500", "812", "1125"]
    let dataAndUnitTransX = [400, 650, 900]
    let unit = ["级", "%", "%"]
    let iconIndex = ["wind", "rain", "humidity2"]
    let weatherData = [weatherJson.live.windpower, weatherJson.live.rain, weatherJson.live.humidity]
    let infoG = svg.append("g")
        .attr("class", "live")
    transX.forEach((item, index) => {
        infoG.append("circle")
            .attr("r", 30)
            .attr("stroke-width", 6)
            .attr("stroke", "#535353")
            .attr("transform", "translate(" + item + ",200)")
        infoG.append("circle")
            .attr("r", 28)
            .attr("stroke-width", 3)
            .attr("stroke", "#ffffff")
            .attr("transform", "translate(" + item + ",200)")
        infoG.append("g")
            .attr("fill", "#fff")
            .attr("stroke-width", 1)
            .attr("stroke", "#fff")
            .attr("transform", "scale(0.8) translate(" + iconTransX[index] + ",258)")
            .html(icon[iconIndex[index]])
        infoG.append("text")
            .attr("x", dataAndUnitTransX[index])
            .attr("y", 280)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 32)
            .text(weatherData[index])
        infoG.append("text")
            .attr("x", dataAndUnitTransX[index])
            .attr("y", 310)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 16)
            .text(unit[index])
    })

//forecast
    let transForecastX = ["320", "485", "650", "815"]
    let transWeekAndWeaIcon = ["400", "565", "730", "895"]
    let transTempIcon = ["315", "480", "645", "810"]
    let transHumIcon = ["410", "575", "740", "905"]
    let transTemp = ["367", "532", "697", "862"]
    let transHum = ["455", "620", "785", "950"]
    let weekDayNum = [weatherJson.forecast[0].week, weatherJson.forecast[1].week, weatherJson.forecast[2].week, weatherJson.forecast[3].week]
    let weekDayNames = ["", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]
    let weatherDataIcon = [weatherFlag4Forecast[0], weatherFlag4Forecast[1], weatherFlag4Forecast[2], weatherFlag4Forecast[3]]
    let weatherDataTempLow = [weatherJson.forecast[0].nighttemp, weatherJson.forecast[1].nighttemp, weatherJson.forecast[2].nighttemp, weatherJson.forecast[3].nighttemp]
    let weatherDataTempHigh = [weatherJson.forecast[0].daytemp, weatherJson.forecast[1].daytemp, weatherJson.forecast[2].daytemp, weatherJson.forecast[3].daytemp]
    let weatherDataHum = ["70", "75", "65", "42"]
    let forecastG = svg.append("g")
        .attr("class", "forecast")
    forecastG.append("rect")
        .attr("width", 660)
        .attr("height", 165)
        .attr("style", "stroke-width:1px;stroke:#fff")
        .attr("transform", "translate(320,450)")
    transForecastX.forEach((item, index) => {
        forecastG.append("rect")
            .attr("x", item)
            .attr("y", 450)
            .attr("fill", index % 2 ? "#4a4a4a" : "#353535")
            .attr("width", 165)
            .attr("height", 165)
        forecastG.append("text")
            .attr("x", transWeekAndWeaIcon[index])
            .attr("y", 470)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 18)
            .text(weekDayNames[weekDayNum[index]])
        forecastG.append("g")
            .attr("class", "icon-weather")
            .attr("transform", "translate(" + transWeekAndWeaIcon[index] + ",510)" + "scale(1.3)")
            .attr("fill", "#FcFcFc")
            .html(icon[weatherDataIcon[index]])
        forecastG.append("g")
            .attr("class", "icon-temperature")
            .attr("transform", "translate(" + transTempIcon[index] + ",560)" + " scale(0.5)")
            .attr("fill", "#FcFcFc")
            .html(icon.temperature)
        forecastG.append("g")
            .attr("class", "icon-humidity")
            .attr("transform", "translate(" + transHumIcon[index] + ",578)" + "scale(0.3)")
            .attr("fill", "#FcFcFc")
            .html(icon.humidity)
        forecastG.append("text")
            .attr("x", transTemp[index])
            .attr("y", 605)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 17)
            .text(weatherDataTempLow[index] + '\xB0C')
        forecastG.append("text")
            .attr("x", transTemp[index])
            .attr("y", 575)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 17)
            .text(weatherDataTempHigh[index] + '\xB0C')
        forecastG.append("text")
            .attr("x", transHum[index])
            .attr("y", 603)
            .attr("text-anchor", "middle")
            .attr("fill", "#fff")
            .attr("font-size", 14)
            .text(weatherDataHum[index] + '%')
    })
})


//天气api部分
// getWeather(3301)

async function getWeather(location) {
    let formData = new FormData();
    formData.append("location", location)
    formData.append("getLive", "true")
    formData.append("getForecast", "true");
    let options = {
        method: 'POST',
        headers: {
            'Accept': 'application/x-www-form-urlencoded',
        },
        body: formData
    };
    const weather = await fetch('http://111.0.80.7:7654/weather-server-go/rest/weather/getWeather', options).then(res => res.json())
    // console.log(weather.data)
    return weather.data
}